# 大连打滚子 (Dalian Da Gunzi)

大连打滚子单机版 - 基于 JavaFX 的单机卡牌游戏

## 游戏简介

打滚子是大连地区流行的扑克牌游戏，属于"升级"（Sheng Ji）类卡牌游戏。本程序实现了单机版本，玩家可以与三个AI对手进行游戏。

## 功能特色

- **单机对战**：一个人类玩家 + 三个AI对手（小明、搭档小红、小刚），组成两支队伍
- **AI难度设置**：支持三种AI智能程度
  - 简单（Easy）：启发式策略出牌
  - 中等（Medium）：记牌器 + 计分策略出牌
  - 困难（Hard）：PIMC蒙特卡洛模拟，支持等价类剪枝、基于时间的动态推演、胜负阈值奖励及ε-greedy rollout策略
- **AI智能优化**（三个难度级别均已优化）：
  - AI领出棒子/滚子时只选强牌（A/K级别的副牌对子或滚子），不再无脑出弱牌多张
  - 没有强副牌可出时，AI会选择小掉主（出小主牌对子/滚子清理弱主）
  - AI领出时避免无意义地浪费分牌（10/5），只有A等明确最大的牌才主动出
  - AI领出策略多样化：优先安全出A，考虑短套缺门制造战术优势，不再单一打主
  - AI根据墩中得分和队友赢牌情况决定是否压牌，避免在无分墩浪费高牌
  - 队友赢墩时优先给非特殊主牌的分牌（5/10/K），保留王牌、2和主牌级不浪费
  - 缺花色时优先垫副牌而非主牌，保留主牌实力
- **叫主优化**：首局亮王定庄，非首局根据上局得分顺时针确定庄家（庄家赢→搭档当庄，闲家赢→顺时针下一位闲家当庄）
- **记牌器**：可选开启记牌器，实时显示各花色各牌面的剩余数量（排除自己手中的牌）
- **简洁界面**：去掉玩家旁的牌数和记牌器中的总计显示，界面更干净
- **完整游戏流程**：叫主、埋底、出牌、计分、升级、进贡

## 游戏规则

### 基本规则

- 4人游戏，2人一队（玩家与对面AI搭档）
- 使用三副扑克牌（162张，含大小王各3张）
- 每人39张牌，6张底牌
- 5分=5分，10分=10分，K=10分（每局共300分）
- 叫主确定主牌花色，庄家队防守
- 队伍从3级开始，打碎10级获胜

### 计分规则

- 防守方（闲家）得分 < 120分：庄家队升级
- 防守方（闲家）得分 ≥ 120分：防守方升级，同时防守方变为下一局庄家（反庄）

### 进贡规则

- 得分小于80时，每少10分，闲家下一轮多进一个贡（如：得分0分=8个贡，得分70分=1个贡）
- 贡从大牌开始上给庄家
- 当闲家得分大于150分，从150开始每多10分加一个血，下轮闲家变庄家后，由下一轮的闲家上贡

### 底牌扣王

- 底牌中可以放入大小王，但会产生血的惩罚
- 扣大王 = 2个血
- 扣小王 = 1个血
- 根据得分是否超过120决定下一轮闲家上贡方向

## 技术要求

- JDK 21+
- Maven 3.8+

## 构建与运行

```bash
# 构建
mvn clean compile

# 运行测试
mvn test

# 打包
mvn package
```

## 联系方式

If you have any questions, you can send an email to liang.tang.cx@gmail.com
